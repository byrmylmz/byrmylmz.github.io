{"hash":"a203ed2622bc78184da0bb7d00202defcf10ecfe","data":{"post":{"title":"Laraval Digital Ocean Deploy","date":"December 20, 2021","content":"<h2 id=\"\"><img src=\"https://images.unsplash.com/photo-1588421357574-87938a86fa28?ixlib=rb-1.2.1&#x26;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&#x26;auto=format&#x26;fit=crop&#x26;w=1770&#x26;h=200\"></h2>\n<p><a href=\"https://www.youtube.com/watch?v=GhGDunq_OSw\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Deploy Laravel to DigitalOcean Youtube</a></p>\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-laravel-with-lemp-on-ubuntu-18-04\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Digital Ocean Explanation</a></p>\n<h3 id=\"connection\"><a href=\"#connection\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Connection</h3>\n<p>test</p>\n<pre><code class=\"language-mysql\">ssh root@server_ip_adress\n</code></pre>\n<h3 id=\"server-set-up\"><a href=\"#server-set-up\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Server set up</h3>\n<pre><code class=\"language-php\">adduser name_of_user\n\nusermod -aG sudo name_of_user\n\nsudo - name_of_user\n\nmkdir .ssh\n\nchmod 700 .ssh\n\nvim .ssh/authorized_keys  // vim or nano\n\ncat ~/.ssh/id_rsa.pub // in your computers terminal cat the public key\n</code></pre>\n<h3 id=\"firewall-configuration\"><a href=\"#firewall-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Firewall configuration</h3>\n<pre><code class=\"language-php\">sudo ufw allow 'Nginx HTTP' \n</code></pre>\n<h3 id=\"mysql-configuration\"><a href=\"#mysql-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Mysql configuration</h3>\n<pre><code class=\"language-php\">sudo mysql_secure_installation\nsudo mysql -u root -p\n</code></pre>\n<h3 id=\"mysql-queries\"><a href=\"#mysql-queries\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>MySQL queries</h3>\n<pre><code class=\"language-mysql\">create user 'username'@'localhost' identified by 'password';\nalter user 'username'@'localhost' identified with mysql_native_password by 'password';\ncreate database database_name;\ngrant all on database_name.* to 'username'@'localhost';\nflush privileges;\nexit;\n</code></pre>\n<h3 id=\"php-extension\"><a href=\"#php-extension\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>PHP extension</h3>\n<pre><code class=\"language-php\">sudo apt update\nsudo apt install php-bcmath php-mbstring php-xml\n</code></pre>\n<h3 id=\"composer\"><a href=\"#composer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Composer</h3>\n<pre><code class=\"language-php\">sudo apt install unzip\ncurl -sS https://getcomposer.org/installer |php\nsudo mv composer.phar /usr/local/bin/composer\n</code></pre>\n<h3 id=\"clone-and-set-up-the-app\"><a href=\"#clone-and-set-up-the-app\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Clone and set up the app</h3>\n<pre><code class=\"language-php\">sudo chown name_of_user ./\n</code></pre>\n<pre><code class=\"language-php\">cd /var/www/\n</code></pre>\n<h3 id=\"github\"><a href=\"#github\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Github</h3>\n<pre><code class=\"language-php\">git clone url_from_github\ncd repo_name\ncomposer install\ncp .env.example .env\nphp artisan generate:key\n// vim or nano\n</code></pre>\n<pre><code class=\"language-php\">vim .env\nphp artisan migrate --force\n</code></pre>\n<h3 id=\"nginx-configuration\"><a href=\"#nginx-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nginx configuration</h3>\n<pre><code class=\"language-php\">sudo vim /etc/nginx/sites-available/tutorial\n</code></pre>\n<pre><code class=\"language-php\">// nginx configuration\nserver {\n    listen 80;\n    server_name DOMAIN_NAME_OR_IP_ADDRESS;\n    root /var/www/name_of_repo/public;\n\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Content-Type-Options \"nosniff\";\n\n    index index.html index.htm index.php;\n\n    charset utf-8;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location = /robots.txt  { access_log off; log_not_found off; }\n\n    error_page 404 /index.php;\n\n    location ~ .php$ {\n        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    location ~ /.(?!well-known).* {\n        deny all;\n    }\n}\n</code></pre>\n<pre><code class=\"language-php\">sudo ln -s /etc/nginx/sites-available/tutorial /etc/nginx/sites-enabled/tutorial\nsudo nginx -t \nsudo service nginx restart\n</code></pre>\n<h3 id=\"change-owner-of-storage-and-bootstrapcache\"><a href=\"#change-owner-of-storage-and-bootstrapcache\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Change owner of storage and bootstrap/cache</h3>\n<pre><code class=\"language-php\">cd path/to/repo\nsudo chown -R www-data.www-data storage\nsudo chown -R www-data.www-data bootstrap/cache\n</code></pre>\n","fileInfo":{"extension":".md","directory":"blog","path":"blog/2020-12-20-digital-ocean.md","name":"2020-12-20-digital-ocean"},"tags":[{"title":"laravel","path":"/tag/laravel/"},{"title":"deploy","path":"/tag/deploy/"}]}},"context":{}}